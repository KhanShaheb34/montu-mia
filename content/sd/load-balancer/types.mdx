---
title: "হরেক রকম লোড ব্যালেন্সার"
description: "কোনটা ছেড়ে কোনটা নেব?"
tags:
  - Load Balancer Types
  - Hardware Load Balancer
  - Software Load Balancer
  - Cloud Load Balancer
  - DNS Load Balancing
  - Layer 4 Load Balancer
  - Layer 7 Load Balancer
  - Nginx
  - HAProxy
  - AWS
---

মন্টু মিয়াঁ তো লোড ব্যালেন্সার বসাবে বলে ঠিক করল। কিন্তু মার্কেটে গিয়ে (মানে গুগলে সার্চ দিয়ে) তার মাথা খারাপ! হার্ডওয়্যার, সফটওয়্যার, ক্লাউড, ডিএনএস, লেয়ার ৪, লেয়ার ৭, এত পদের লোড ব্যালেন্সার!

মনে হচ্ছে বিরিয়ানি খেতে গিয়ে মেনু কার্ড দেখে কনফিউজড হয়ে যাওয়া অবস্থা। কোনটা তার বিড়ালটিউবের জন্য পারফেক্ট? মন্টু মিয়াঁ তার স্বভাবসুলভ ভঙ্গিতে বিষয়গুলোকে সহজ করে নোট করে ফেলল:

## হার্ডওয়্যার vs সফটওয়্যার vs ক্লাউড

> টাকা বনাম প্যারা

- **হার্ডওয়্যার লোড ব্যালেন্সার:** এগুলো হলো ডেডিকেটেড ফিজিক্যাল মেশিন। অনেকটা নিজের বাড়িতে জেনারেটর বসানোর মতো। এগুলো দারুণ ফাস্ট, কিন্তু প্রচুর দাম। গুগল-ফেসবুকের মতো "বড়লোকি কোম্পানি" ছাড়া এগুলো কেউ কেনে না। মন্টু এটা প্রথমেই বাদ দিল।

- **সফটওয়্যার লোড ব্যালেন্সার:** এটা হলো সাধারণ কম্পিউটারে ইন্সটল করা একটা সফটওয়্যার (যেমন Nginx বা HAProxy)। খরচ কম, ফ্লেক্সিবল। কিন্তু ট্রাফিক বাড়লে সেই কম্পিউটার আপগ্রেড করার বা রক্ষণাবেক্ষণের একটা 'প্যারা' আছে।

- **ক্লাউড লোড ব্যালেন্সার (AWS/Cloudflare):** এটা হলো মন্টুর মতো স্টার্টআপদের জন্য আশীর্বাদ। অনেকটা 'উবার'-এর মতো। গাড়ি কেনার দরকার নেই, অ্যাপে কল করো, চড়ে বসো। অ্যামাজন বা ক্লাউডফ্লেয়ার সব ম্যানেজ করবে, মন্টু শুধু মাসিক ভাড়া দেবে। সেটআপ সহজ, প্যারা কম। মন্টু মনে মনে এটাতেই টিক চিহ্ন দিল।

## DNS লোড ব্যালেন্সিং

> ফোনবুকের কারসাজি

আমরা যখন মোবাইলে কাউকে কল দিই, আমরা নাম সিলেক্ট করি, কিন্তু ফোন কল যায় নাম্বারে। DNS-ও তাই করে, `biraltube.com` লিখলে সে একটা আইপি অ্যাড্রেস বা সার্ভারের ঠিকানা দেয়।

মজার ব্যাপার হলো, DNS নিজেই 'লোড ব্যালেন্সার' হিসেবে কাজ করতে পারে। তার মানে, `biraltube.com`-এর বিপরীতে একটা আইপি না দিয়ে, আমরা ১০টা সার্ভারের আইপি সেট করে দিব। আর DNS নিজেই ১ নম্বর ইউজারকে সার্ভার ১, ২ নম্বর ইউজারকে সার্ভার ২, এভাবে ভাগ করে দেবে।

এটা সেটআপ করা সহজ, প্রায় বিনা খরচে। কিন্তু ছোটখাটো সমস্যা আছে।

**সুবিধা:**

- প্রায় শূন্য খরচে চালু করা যায়।
- সেটআপ সোজা, ডোমেইন প্যানেলে একটু 'এ রেকর্ড' (A Record) যোগ করলেই হবে।

**অসুবিধা:**

- যদি ১ নম্বর সার্ভার ক্র্যাশ করে, DNS সেটা টের পায় না। তাই সে ইউজারকে সেই মরা সার্ভারেই পাঠাতে থাকে।
- DNS ক্যাশিং (Caching) থাকায়, একবার কোনো সার্ভার সিলেক্ট হলে ঘণ্টাখানেক সেই সার্ভারেই আটকে থাকে।

মন্টু ভাবল, "এটা ভালো নেই, আমার বিড়ালটিউবের ইউজারদের ঝুঁকিতে ফেলতে পারব না।"

## লেয়ার ৪ (Layer 4) vs লেয়ার ৭ (Layer 7)

> ছাগল ধরা নাকি গয়না বানানো?

এটা হলো লোড ব্যালেন্সিং এর হৃদয়। তাই খুব মনোযোগ দিয়ে পড়তে হবে।

আগে আমাদের একটু নেটওয়ার্কিং এর চিকন পাতলা ধারণা নিতে হবে। তুমি হয়তো জানো, ইন্টারনেটের ডাটা চলাচল করে মডেলের 'লেয়ার' মেনে।

- **লেয়ার ৪ (Transport Layer):** এটা শুধু দেখে "এই প্যাকেট কোথায় যাবে?" (মানে আইপি অ্যাড্রেস আর পোর্ট নাম্বার দেখে)। মানে, এটা একদম 'গাড়ি দেখে থামাইয়া রাস্তা বলে দিতে' পারে, কিন্তু ভেতরে গাড়ির কী মাল তা জানে না।

- **লেয়ার ৭ (Application Layer):** এটা পুরো রিকোয়েস্টের ভেতরে ঢুকে দেখে, "তুমি মুভি দেখতে চাও? নাকি ইমেজ আপলোড করতে চাও? কোন ইউআরএল চাইছো?" ইত্যাদি। অর্থাৎ অনেকটা বুদ্ধিমান ট্রাফিক পুলিশ, যে জানে যে কোন গাড়ির কী মাল আছে।

**Layer 4 সুবিধা:**

- প্যাকেট দেখে না, তাই খুব দ্রুত কাজ করে।
- স্কেল করা সহজ।

**Layer 7 সুবিধা:**

- ইউআরএল, হেডার দেখে ডিসিশন নিতে পারে।
- যেমন `/videos/*` রিকোয়েস্ট ভিডিও সার্ভারে, `/api/*` রিকোয়েস্ট এপিআই সার্ভারে পাঠানো যায়।
- আরও নিয়ন্ত্রণ, বেশি কাস্টমাইজেশন।

মন্টু ভাবল, আপাতত তার বিড়ালটিউবে Layer 7 লোড ব্যালেন্সার বসাবে। কারণ সে চায় `/api` এবং `/video` আলাদা সার্ভারে গিয়ে হিট করুক।

---

মন্টু মিয়াঁ সব পয়েন্ট গুছিয়ে রাখল:

| ধরণ                    | সুবিধা                             | অসুবিধা                                                        | সেরা ব্যবহারকারী                     |
| ---------------------- | ---------------------------------- | --------------------------------------------------------------- | ------------------------------------- |
| হার্ডওয়্যার           | অনেক দ্রুত, পারফরম্যান্স ভালো    | খরচ বেশি, ফ্লেক্সিবল না                                       | বড় এন্টারপ্রাইজ কোম্পানি            |
| সফটওয়্যার             | খরচ কম, ফ্লেক্সিবল               | ম্যানুয়াল ম্যানেজমেন্ট লাগে                                  | টেকি স্টার্টআপ                       |
| ক্লাউড                | ম্যানেজমেন্ট ফ্রি, স্কেল সহজ     | মাসিক খরচ                                                      | স্টার্টআপ, ছোট-মাঝারি ব্যবসা         |
| DNS লোড ব্যালেন্সিং   | খরচ শূন্য, সেটআপ সহজ             | হেল্থ চেক নেই, মোটা ক্যাশিং সমস্যা                            | পার্সোনাল প্রজেক্ট, স্ট্যাটিক সাইট |
| লেয়ার ৪ (Layer 4)     | অনেক দ্রুত                        | স্মার্ট রাউটিং করতে পারে না                                   | ভিডিও স্ট্রিমিং, গেম সার্ভার        |
| লেয়ার ৭ (Layer 7)     | স্মার্ট, কন্টেন্ট বেসড ডিসিশন  | একটু ধীর, রিসোর্স বেশি খায়                                    | ওয়েব অ্যাপ, API সার্ভার            |
